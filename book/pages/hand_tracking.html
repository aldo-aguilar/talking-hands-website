<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hand Tracking</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../pages/introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="../pages/inspiration.html"><strong aria-hidden="true">1.</strong> Inspiration</a></li><li class="chapter-item expanded "><a href="../pages/what.html"><strong aria-hidden="true">2.</strong> What is Talking Hands?</a></li><li class="chapter-item expanded "><a href="../pages/how.html"><strong aria-hidden="true">3.</strong> How was Talking Hands made?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pages/talkbox.html"><strong aria-hidden="true">3.1.</strong> The Talk Box</a></li><li class="chapter-item expanded "><a href="../pages/hand_tracking.html" class="active"><strong aria-hidden="true">3.2.</strong> Hand Tracking</a></li></ol></li><li class="chapter-item expanded "><a href="../pages/final.html"><strong aria-hidden="true">4.</strong> The Final Prototype</a></li><li class="chapter-item expanded "><a href="../pages/code.html"><strong aria-hidden="true">5.</strong> Code</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hand-tracking"><a class="header" href="#hand-tracking">Hand Tracking</a></h1>
<p>Lots of solutions for hand tracking exist online. There are even pieces of hardware which will handle the software for you! However, I thought it would be a fun process to code up my own solution. So I found [Media Pipe] (https://google.github.io/mediapipe/), which is an open source solution for computer vision tasks. It didn’t take me too long to have my hands displayed on screen from my webcam. This is where my project experienced the most iterations, let me outline my experience working with hand tracking.</p>
<h2 id="using-regions-to-control-notes"><a class="header" href="#using-regions-to-control-notes">Using Regions To Control Notes</a></h2>
<p>This was my first approach for controlling notes, I just made a grid on screen and based on where your hand was the program would output a different value. This worked really well, and it was really accurate. Something about it didn’t feel great though; you couldn’t smoothly transition between notes which was important. </p>
<h2 id="using-gestures"><a class="header" href="#using-gestures">Using Gestures</a></h2>
<p>This was the most natural way to interact via hand tracking. However, I was slightly intimidated by this approach and had some hesitation before trying this out. The first thing I tried out was using my right hand to change notes. This followed a simple pattern: you just touch your index finger to your thumb, this could be C. Next if you want to play B you can touch the index middle finger and thumb. This works for each finger. My only issue was I could only play 4 notes. I thought about using the screen regions with your left hand as a modifier for notes you played. I ended up not really liking this, something about it didn’t feel right. The next idea I tried was using a waving gesture to change what notes you played with your right hand. After a lot of debugging, I was able to calculate the speed at which your hand moves, and using that I could determine what position of the scale you were in (how the left hand modified the right). This gesture felt so bad to play on, you had to constantly wave your hand back and forth at the exact same speed. And since speed was normalized it was extremely sensitive (little to no control). The other issues about calculating speed was when a hand went off-screen, detecting another hand, or randomly blowing up to a giant value. I realized through this process that designing a general gesture mechanism would be really difficult, I needed to focus on something that made sense to me. My solution not only worked out well, it also really emphasized that <em>Talking Hands</em> title. </p>
<h2 id="using-good-gestures"><a class="header" href="#using-good-gestures">Using Good Gestures</a></h2>
<p>My right hand gesture stayed the same as before, for example in C:</p>
<code>
<p align="center">
 	Index touches thumb -> C
	Middle touches thumb -> B
	Ring touches thumb -> D
Pinky touches thumb -> E
</p>
<p>But now I have separate positions for my left hand:</p>
<p align="center">
	No fingers touch thumb -> Position L0
 	Index touches thumb -> Position L1
	Middle touches thumb -> Position L2
	Ring touches thumb -> Position L3
Pinky touches thumb -> Position L4
</p>
<p>This allowed me to modify the right hand. Here’s an idea of how this works:</p>
<p align="center">
 	L0 & Index touches thumb -> C
	L0 & Middle touches thumb -> B
	L0 & Ring touches thumb -> D
L0 & Pinky touches thumb -> E
	L1 & Index touches thumb -> F
	L1 & Middle touches thumb -> G
	L1 & Ring touches thumb -> C
L1 & Pinky touches thumb -> B
.
.
.
</p>
</code>
<p>I decided that I would also make it so that if all fingers of the left hand were touching the thumb the key would shift. You can pre program progressions you want to play over, but by default you’ll cycle over the circle of 4ths. </p>
<h2 id="cleaning-things-up"><a class="header" href="#cleaning-things-up">Cleaning Things Up</a></h2>
<p>After implementing gestures I fixed all the bugs that came with my gestures:</p>
<ul>
	<li>Right vs Left: I split the screen in half so that if a hand is to the right of the middle it acts as the right hand, and if a hand is to the left it acts as the left hand. </li>
	<li>Sensitivity: Dealing with real world distances can be a pain. The current build of my hand tracking software works best when your hands are ~2 feet away from your camera. I enjoy the distances that I set and found them to not be too sensitive. But at first if you breathed wrong you would play 100 notes and switch keys rapidly</li>
</ul>
<h2 id="max-patch"><a class="header" href="#max-patch">Max Patch</a></h2>
<p>My max patch is fairly basic, it reads in data from my hand tracking software using UDP, and will play notes and switch keys based on input from the script. Currently you can choose to play major scales, pentatonic scales, and the aeolian mode of major.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../pages/talkbox.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../pages/final.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../pages/talkbox.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../pages/final.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
