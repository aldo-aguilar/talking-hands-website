<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="pages/introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="pages/inspiration.html"><strong aria-hidden="true">1.</strong> Inspiration</a></li><li class="chapter-item expanded "><a href="pages/what.html"><strong aria-hidden="true">2.</strong> What is Talking Hands?</a></li><li class="chapter-item expanded "><a href="pages/how.html"><strong aria-hidden="true">3.</strong> How was Talking Hands made?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pages/talkbox.html"><strong aria-hidden="true">3.1.</strong> The Talk Box</a></li><li class="chapter-item expanded "><a href="pages/hand_tracking.html"><strong aria-hidden="true">3.2.</strong> Hand Tracking</a></li></ol></li><li class="chapter-item expanded "><a href="pages/final.html"><strong aria-hidden="true">4.</strong> The Final Prototype</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="talking-hands-by-aldo-aguilar"><a class="header" href="#talking-hands-by-aldo-aguilar">Talking Hands by Aldo Aguilar</a></h1>
<!-- <video width="800" height="600" controls>
  <source src="../media/talking_hands.mov" type="video/mp4">
</video> -->
<p><img src="pages/../media/download.jpeg" alt="" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="inspiration"><a class="header" href="#inspiration">Inspiration</a></h1>
<p>Talking Hands is the dream-sound-child of &quot;rustic&quot; augmented reality and 70's talk box technology. Ever since I heard Daft Punk's Discovery album I knew that I needed to get a piece of that technology in my mouth. Fast forward ~11 years and here I have the opportunity to build any instrument my imagination deemed necessary. I knew I needed to do something not only to satisfy this decade-old talkbox itch but also my new craving for unnecessary machine learning. This thing wasn’t going to come to fruition without some cheesy title that would make me giggle every time I heard it; thus the punny name “Talking Hands” emerged. Now my initial ideas about how to interface with a talk box using your hands had a lot of sensors, motion, and other ideas using electronics. However, I thought that it would be more accessible to write something that anyone with a webcam could interface with. I really enjoy machine learning, and computer vision is something I hadn’t built on-top of enough. Now we have a talkbox fully controlled using your webcam, no guitars needed. </p>
<p><img src="pages/../media/daft_punk_talkbox.jpg" alt="" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="what-is-talking-hands"><a class="header" href="#what-is-talking-hands">What is Talking Hands?</a></h1>
<p>Simply put, Talking Hands is a talkbox I built that you control using your hands. A talkbox is an instrument that lets you play sounds through your mouth, and using your mouth you can sing through these sounds. The result sounds like robotic singing.</p>
<p><img src="pages/../media/talkbox.jpg" alt="" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="how-was-talking-hands-made"><a class="header" href="#how-was-talking-hands-made">How was Talking Hands made?</a></h1>
<p>The best way I can break this up is to split the instrument into two components: the talk box and the hand tracking software.</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="the-talk-box"><a class="header" href="#the-talk-box">The Talk Box</a></h1>
<p>The talkbox takes a signal from an audio device, amplifies it, and outputs it through a compression driver. I built the amp here following this guide, but I didn’t have the right components so this was just a starting point. Here’s what the amp looks like: </p>
<p><img src="pages/../media/amp_proto.png" alt="Prototype Amp" title="Amp Prototype" /></p>
<p>After I got the amp working I soldered my components onto some pcb:</p>
<p><img src="pages/../media/final_amp.png" alt="Final Amp" title="Final Amp" /></p>
<p>It took me a while to figure out how to build the talk box, I was trying to use an arduino to send audio for a long time but this didn’t work. I found that using the amp was much more efficient. </p>
<p>Originally I was using some little speakers for my talk box:</p>
<p><img src="pages/../media/little_speakers.png" alt="Little Speakers" /></p>
<p>These speakers worked great for getting some sound to play. Part of the issue is that these speakers are fairly quiet. I wrapped these speakers up in a duct tape container and tried to send sound out of a tube, no luck. I did some research and found that everyone in talkbox building uses a compression driver. A few days later I was ready to go deaf because this thing was LOUD. I managed to get it working but I was still losing too much sound to really get a good talkbox effect. My solution was to attach my tubing using tubing. I cut small sections of tubing to help make a good seal with the compression drive. I did have to wrap all this in duct tape to keep it from unraveling, and for the <em>aesthetic</em>. Now I had a working talk box:</p>
<p><img src="pages/../media/talking_hands.png" alt="Talkbox" /></p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="hand-tracking"><a class="header" href="#hand-tracking">Hand Tracking</a></h1>
<p>Lots of solutions for hand tracking exist online. There are even pieces of hardware which will handle the software for you! However, I thought it would be a fun process to code up my own solution. So I found [Media Pipe] (https://google.github.io/mediapipe/), which is an open source solution for computer vision tasks. It didn’t take me too long to have my hands displayed on screen from my webcam. This is where my project experienced the most iterations, let me outline my experience working with hand tracking.</p>
<h2 id="using-regions-to-control-notes"><a class="header" href="#using-regions-to-control-notes">Using Regions To Control Notes</a></h2>
<p>This was my first approach for controlling notes, I just made a grid on screen and based on where your hand was the program would output a different value. This worked really well, and it was really accurate. Something about it didn’t feel great though; you couldn’t smoothly transition between notes which was important. </p>
<h2 id="using-gestures"><a class="header" href="#using-gestures">Using Gestures</a></h2>
<p>This was the most natural way to interact via hand tracking. However, I was slightly intimidated by this approach and had some hesitation before trying this out. The first thing I tried out was using my right hand to change notes. This followed a simple pattern: you just touch your index finger to your thumb, this could be C. Next if you want to play B you can touch the index middle finger and thumb. This works for each finger. My only issue was I could only play 4 notes. I thought about using the screen regions with your left hand as a modifier for notes you played. I ended up not really liking this, something about it didn’t feel right. The next idea I tried was using a waving gesture to change what notes you played with your right hand. After a lot of debugging, I was able to calculate the speed at which your hand moves, and using that I could determine what position of the scale you were in (how the left hand modified the right). This gesture felt so bad to play on, you had to constantly wave your hand back and forth at the exact same speed. And since speed was normalized it was extremely sensitive (little to no control). The other issues about calculating speed was when a hand went off-screen, detecting another hand, or randomly blowing up to a giant value. I realized through this process that designing a general gesture mechanism would be really difficult, I needed to focus on something that made sense to me. My solution not only worked out well, it also really emphasized that <em>Talking Hands</em> title. </p>
<h2 id="using-good-gestures"><a class="header" href="#using-good-gestures">Using Good Gestures</a></h2>
<p>My right hand gesture stayed the same as before, for example in C:</p>
<code>
<p align="center">
 	Index touches thumb -> C
	Middle touches thumb -> B
	Ring touches thumb -> D
Pinky touches thumb -> E
</p>
<p>But now I have separate positions for my left hand:</p>
<p align="center">
	No fingers touch thumb -> Position L0
 	Index touches thumb -> Position L1
	Middle touches thumb -> Position L2
	Ring touches thumb -> Position L3
Pinky touches thumb -> Position L4
</p>
<p>This allowed me to modify the right hand. Here’s an idea of how this works:</p>
<p align="center">
 	L0 & Index touches thumb -> C
	L0 & Middle touches thumb -> B
	L0 & Ring touches thumb -> D
L0 & Pinky touches thumb -> E
	L1 & Index touches thumb -> F
	L1 & Middle touches thumb -> G
	L1 & Ring touches thumb -> C
L1 & Pinky touches thumb -> B
.
.
.
</p>
</code>
<p>I decided that I would also make it so that if all fingers of the left hand were touching the thumb the key would shift. You can pre program progressions you want to play over, but by default you’ll cycle over the circle of 4ths. </p>
<h2 id="cleaning-things-up"><a class="header" href="#cleaning-things-up">Cleaning Things Up</a></h2>
<p>After implementing gestures I fixed all the bugs that came with my gestures:</p>
<ul>
	<li>Right vs Left: I split the screen in half so that if a hand is to the right of the middle it acts as the right hand, and if a hand is to the left it acts as the left hand. </li>
	<li>Sensitivity: Dealing with real world distances can be a pain. The current build of my hand tracking software works best when your hands are ~2 feet away from your camera. I enjoy the distances that I set and found them to not be too sensitive. But at first if you breathed wrong you would play 100 notes and switch keys rapidly</li>
</ul>
<h2 id="max-patch"><a class="header" href="#max-patch">Max Patch</a></h2>
<p>My max patch is fairly basic, it reads in data from my hand tracking software using UDP, and will play notes and switch keys based on input from the script. Currently you can choose to play major scales, pentatonic scales, and the aeolian mode of major.</p>
<div id="chapter_begin" style="break-before: page; page-break-before: always;"></div><h1 id="the-final-prototype"><a class="header" href="#the-final-prototype">The Final Prototype</a></h1>
<video width="800" height="600" controls>
  <source src="../media/talking_hands.mov" type="video/mp4">
</video>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
